<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë£°ë › ê¸°ë¡ ê´€ë¦¬</title>
<style>
body { font-family: Arial; background:#f0f0f0; padding:30px; }
.box { background:#fff; padding:15px; margin-bottom:15px; border-radius:8px; }
.grid {
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap:6px 12px;
  margin-top:8px;
}
.cell {
  background:#e9e9e9;
  padding:6px;
  border-radius:4px;
  font-size:13px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
button { font-size:11px; margin-left:4px; }
.control {
  background:#fff;
  padding:15px;
  border-radius:8px;
  margin-bottom:20px;
}
</style>
</head>
<body>

<h1>ğŸ“Š ë£°ë › ê¸°ë¡ ê´€ë¦¬</h1>

<div class="control">
  ğŸ” <input id="search" placeholder="ë‹‰ë„¤ì„ / ë£°ë ›ëª…">
  <button onclick="render()">ê²€ìƒ‰</button>
</div>

<div id="log"></div>

<script>
function getData(){
  return JSON.parse(localStorage.getItem("rouletteLog")) || {};
}
function saveData(d){
  localStorage.setItem("rouletteLog", JSON.stringify(d));
}

function changeCount(user, rIndex, num, delta){
  const data = getData();
  const stats = data[user][rIndex].stats;

  stats[num] = (stats[num] || 0) + delta;
  if(stats[num] <= 0) delete stats[num];

  saveData(data);
  render();
}

function render(){
  const keyword = search.value.trim();
  const data = getData();
  const log = document.getElementById("log");
  log.innerHTML = "";

  for(const user in data){
    if(keyword && !user.includes(keyword) &&
       !data[user].some(r => r.roulette.includes(keyword))) continue;

    let html = `<div class="box"><strong>ë‹‰ë„¤ì„: ${user}</strong><br><br>`;

    data[user].forEach((r, rIndex) => {
      if(keyword && !r.roulette.includes(keyword) && !user.includes(keyword)) return;

      html += `â–¶ ${r.roulette} (${r.count}íšŒ)<div class="grid">`;

      for(let i=1;i<=10;i++){
        if(r.stats[i]){
          html += `
          <div class="cell">
            ${i} : ${r.stats[i]}íšŒ
            <span>
              <button onclick="changeCount('${user}',${rIndex},${i},1)">ï¼‹</button>
              <button onclick="changeCount('${user}',${rIndex},${i},-1)">ï¼</button>
            </span>
          </div>`;
        }
      }

      for(let i=11;i<=20;i++){
        if(r.stats[i]){
          html += `
          <div class="cell">
            ${i} : ${r.stats[i]}íšŒ
            <span>
              <button onclick="changeCount('${user}',${rIndex},${i},1)">ï¼‹</button>
              <button onclick="changeCount('${user}',${rIndex},${i},-1)">ï¼</button>
            </span>
          </div>`;
        }
      }

      html += `</div>`;
    });

    html += `</div>`;
    log.innerHTML += html;
  }
}

render();
</script>

</body>
</html>
